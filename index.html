<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prayer Times</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f8f8f8;
            padding: 20px;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
        .card {
            background: white;
            padding: 25px;
            margin: 20px;
            width: 90%;
            max-width: 700px;
            border-radius: 10px;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        h1 {
            color: #D4AF37;
            margin-bottom: 15px;
        }
        h2 {
            color: #333;
            margin-bottom: 15px;
        }
        .time-left {
            font-size: 22px;
            color: #E74C3C;
            font-weight: bold;
        }
        .calendar {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        .calendar th, .calendar td {
            padding: 10px;
            border: 1px solid #ddd;
            text-align: center;
        }
        .calendar th {
            background-color: #f0f0f0;
            font-size: 16px;
            color: #555;
        }
        .calendar td {
            font-size: 14px;
            color: #333;
        }
        .day {
            font-weight: bold;
            color: #333;
        }
        .prayer-time {
            margin-top: 5px;
            font-size: 12px;
        }
    </style>
</head>
<body>

    <div class="card">
        <h1>Prayer Times</h1>
        <h2 id="next-prayer">Next Prayer: Loading...</h2>
        <p class="time-left" id="countdown">--:--</p>
    </div>

    <div class="card">
        <h2>Prayer Calendar:</h2>
        <table class="calendar" id="calendar">
            <thead>
                <tr>
                    <th>Sun</th>
                    <th>Mon</th>
                    <th>Tue</th>
                    <th>Wed</th>
                    <th>Thu</th>
                    <th>Fri</th>
                    <th>Sat</th>
                </tr>
            </thead>
            <tbody id="calendar-body">
                <!-- Calendar dates will be populated here -->
            </tbody>
        </table>
    </div>

    <script>
        const prayerTimes = [
            { fajr: "05:24 AM", dhuhr: "12:30 PM", asr: "03:33 PM", maghrib: "05:58 PM", isha: "07:20 PM", date: "02/19" },
            { fajr: "05:23 AM", dhuhr: "12:30 PM", asr: "03:34 PM", maghrib: "05:59 PM", isha: "07:21 PM", date: "02/20" },
            { fajr: "05:22 AM", dhuhr: "12:30 PM", asr: "03:34 PM", maghrib: "06:00 PM", isha: "07:22 PM", date: "02/21" },
            { fajr: "05:21 AM", dhuhr: "12:30 PM", asr: "03:35 PM", maghrib: "06:01 PM", isha: "07:23 PM", date: "02/22" },
            { fajr: "05:20 AM", dhuhr: "12:30 PM", asr: "03:36 PM", maghrib: "06:02 PM", isha: "07:24 PM", date: "02/23" },
            { fajr: "05:19 AM", dhuhr: "12:30 PM", asr: "03:36 PM", maghrib: "06:03 PM", isha: "07:25 PM", date: "02/24" },
            { fajr: "05:18 AM", dhuhr: "12:29 PM", asr: "03:37 PM", maghrib: "06:04 PM", isha: "07:27 PM", date: "02/25" },
            { fajr: "05:17 AM", dhuhr: "12:29 PM", asr: "03:38 PM", maghrib: "06:05 PM", isha: "07:28 PM", date: "02/26" },
            { fajr: "05:16 AM", dhuhr: "12:29 PM", asr: "03:38 PM", maghrib: "06:06 PM", isha: "07:29 PM", date: "02/27" },
            { fajr: "05:15 AM", dhuhr: "12:29 PM", asr: "03:39 PM", maghrib: "06:07 PM", isha: "07:30 PM", date: "02/28" },
            { fajr: "05:14 AM", dhuhr: "12:29 PM", asr: "03:39 PM", maghrib: "06:07 PM", isha: "07:30 PM", date: "02/29" }
        ];

        // Function to convert time string to Date object
        function convertToDate(timeStr) {
            const [time, period] = timeStr.split(' ');
            const [hours, minutes] = time.split(':').map(num => parseInt(num));
            let newHours = hours;

            if (period === "PM" && hours !== 12) newHours += 12;
            if (period === "AM" && hours === 12) newHours = 0;

            return new Date(new Date().setHours(newHours, minutes, 0, 0));
        }

        // Function to get the next prayer
        function getNextPrayer() {
            const currentTime = new Date();
            let nextPrayerTime = null;
            let prayerName = '';
            let nextPrayer = null;

            for (let i = 0; i < prayerTimes.length; i++) {
                const prayer = prayerTimes[i];
                const prayers = [
                    { name: "Fajr", time: convertToDate(prayer.fajr) },
                    { name: "Dhuhr", time: convertToDate(prayer.dhuhr) },
                    { name: "Asr", time: convertToDate(prayer.asr) },
                    { name: "Maghrib", time: convertToDate(prayer.maghrib) },
                    { name: "Isha", time: convertToDate(prayer.isha) }
                ];

                for (let j = 0; j < prayers.length; j++) {
                    if (currentTime < prayers[j].time) {
                        nextPrayerTime = prayers[j].time;
                        prayerName = prayers[j].name;
                        nextPrayer = prayers[j];
                        break;
                    }
                }

                if (nextPrayerTime) break;
            }

            if (nextPrayerTime) {
                const timeLeft = getTimeLeft(nextPrayerTime, currentTime);
                document.getElementById('next-prayer').innerText = `Next Prayer: ${prayerName}`;
                document.getElementById('countdown').innerText = timeLeft;
            } else {
                document.getElementById('next-prayer').innerText = "Next Prayer: None Today";
                document.getElementById('countdown').innerText = "00:00";
            }
        }

        // Function to calculate time left
        function getTimeLeft(nextPrayerTime, currentTime) {
            const diff = nextPrayerTime - currentTime;
            const hours = Math.floor(diff / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            return `${hours}:${minutes < 10 ? '0' + minutes : minutes}`;
        }

        // Display the prayer calendar
        function displayCalendar() {
            const calendarBody = document.getElementById("calendar-body");
            const currentDate = new Date();
            const startDay = new Date(currentDate.getFullYear(), currentDate.getMonth(), 1).getDay();
            const daysInMonth = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 0).getDate();
            
            let dayCount = 1;
            let rows = '';

            for (let i = 0; i < 5; i++) {
                rows += '<tr>';
                for (let j = 0; j < 7; j++) {
                    if (i === 0 && j < startDay || dayCount > daysInMonth) {
                        rows += '<td></td>';
                    } else {
                        const prayer = prayerTimes.find(p => p.date === `02/${dayCount < 10 ? '0' + dayCount : dayCount}`);
                        rows += `<td>
                                    <div class="day">${dayCount}</div>
                                    ${prayer ? `
                                        <div class="prayer-time">Fajr: ${prayer.fajr}</div>
                                        <div class="prayer-time">Dhuhr: ${prayer.dhuhr}</div>
                                        <div class="prayer-time">Asr: ${prayer.asr}</div>
                                        <div class="prayer-time">Maghrib: ${prayer.maghrib}</div>
                                        <div class="prayer-time">Isha: ${prayer.isha}</div>` : ''}
                                 </td>`;
                        dayCount++;
                    }
                }
                rows += '</tr>';
            }
            calendarBody.innerHTML = rows;
        }

        // Update countdown every second
        setInterval(function() {
            getNextPrayer();
        }, 1000);

        displayCalendar();
        getNextPrayer(); // Call once on page load
    </script>

</body>
</html>
